<th:block th:fragment="parteArriba">
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Autonomopro</title>

        <link rel="icon" type="image/x-icon" href="/dist/img/autonomo-pro.ico" />
        <!-- Google Font: Source Sans Pro -->
        <link rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
        <!-- Font Awesome Icons -->
        <link rel="stylesheet" href="/plugins/fontawesome-free/css/all.min.css">
        <!-- overlayScrollbars -->
        <link rel="stylesheet" href="/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
        <!-- Theme style -->
        <link rel="stylesheet" href="/dist/css/adminlte.min.css">
    </head>

    <body class="hold-transition dark-mode sidebar-mini layout-fixed layout-navbar-fixed layout-footer-fixed"></body>

    <div class="wrapper">

        <!-- Preloader -->
        <div class="preloader flex-column justify-content-center align-items-center">
            <img class="animation__wobble" src="/dist/img/AdminLTELogo.png" alt="AdminLTELogo" height="60" width="60">
        </div>

        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-dark">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/index" class="nav-link">Home</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/listarFacturas" class="nav-link">Facturas</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/listarClientes" class="nav-link">Clientes</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/listarAlbaranes" class="nav-link">Albaranes</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="/listarProductos" class="nav-link">Productos</a>
                </li>
            </ul>
            <a href="#" onclick="logout()">Cerrar sesión</a>
            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <!-- Navbar Search -->
                <li class="nav-item">
                    <a class="nav-link" data-widget="navbar-search" href="#" role="button">
                        <i class="fas fa-search"></i>
                    </a>
                    <div class="navbar-search-block">
                        <form class="form-inline">
                            <div class="input-group input-group-sm">
                                <input class="form-control form-control-navbar" type="search" placeholder="Search"
                                    aria-label="Search">
                                <div class="input-group-append">
                                    <button class="btn btn-navbar" type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                    <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </li>

                <li class="nav-item">
                    <a class="nav-link" data-widget="fullscreen" href="#" role="button">
                        <i class="fas fa-expand-arrows-alt"></i>
                    </a>
                </li>

            </ul>
        </nav>
        <!-- /.navbar -->


        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="index3.html" class="brand-link">
                <img src="/dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
                    style="opacity: .8">
                <span class="brand-text font-weight-light">Menu Lateral</span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">

                <!-- SidebarSearch Form -->
                <div class="form-inline">
                    <div class="input-group" data-widget="sidebar-search">
                        <input class="form-control form-control-sidebar" type="search" placeholder="Search"
                            aria-label="Search">
                        <div class="input-group-append">
                            <button class="btn btn-sidebar">
                                <i class="fas fa-search fa-fw"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <!-- Add icons to the links using the .nav-icon class with font-awesome or any other icon font library -->
                    <ul class="nav nav-pills nav-sidebar flex-column">
                        <li class="nav-item">
                            <a href="/index" class="nav-link">
                                <i class="far fa-circle nav-icon"></i>
                                <p>Home</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/listarFacturas" class="nav-link">
                                <i class="far fa-circle nav-icon"></i>
                                <p>Facturas</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/listarClientes" class="nav-link">
                                <i class="far fa-circle nav-icon"></i>
                                <p>Clientes</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/listarAlbaranes" class="nav-link">
                                <i class="far fa-circle nav-icon"></i>
                                <p>Albaranes</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/listarProductos" class="nav-link">
                                <i class="far fa-circle nav-icon"></i>
                                <p>Productos</p>
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->
        </aside>
</th:block>
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-12">
                    <!-- Diseño espectacular -->
                    <div class="jumbotron jumbotron-fluid bg-dark text-white">
                        <div class="container">
                            <h1 class="display-4">Bienvenido a nuestro Sistema de Facturación Web</h1>
                            <p class="lead">La solución perfecta para autónomos y pequeñas empresas.</p>
                            <hr class="my-4">
                            <p>Con nuestro sistema, gestionar tu facturación nunca ha sido tan fácil.</p>
                            <a class="btn btn-primary btn-lg" href="/crearFactura" role="button">Comenzar Ahora</a>
                        </div>
                    </div>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Agregar gráficos de cantidad e importe total -->
    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Cantidad de Facturas</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="cantidadFacturasChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Importe Total de Facturas</h3>
                        </div>
                        <div class="card-body">
                            <canvas id="importeTotalChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--cuadro con información adicional -->
    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-6">
                    <div class="card card-primary card-outline">
                        <div class="card-header">
                            <h5 class="card-title">Más sobre nuestro sistema</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text">Nuestro sistema de facturación web está diseñado específicamente para
                                satisfacer las necesidades de autónomos y pequeñas empresas. Algunas de nuestras
                                características incluyen:</p>
                            <ul>
                                <li>Facturación fácil y rápida en línea.</li>
                                <li>Generación automática de informes y estadísticas.</li>
                                <li>Seguridad de datos.</li>
                                <li>Soporte dedicado y atención al cliente.</li>
                            </ul>
                            <a href="#" class="btn btn-primary">Más información</a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <!-- Aquí puedes agregar otra cosa diferente, como un vídeo explicativo o un gráfico interactivo -->
                </div>
            </div><!-- /.row -->
        </div><!-- /.container-fluid -->
    </div>
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->



</div>

<th:block th:fragment="parteAbajo">
    <!-- Main Footer -->
    <footer class="main-footer">
        <strong>Copyright &copy; 2014-2021 <a href="https://adminlte.io">AdminLTE.io</a>.</strong>
        All rights reserved.
        <div class="float-right d-none d-sm-inline-block">
            <b>Version</b> 3.2.0
        </div>
    </footer>
    </div>
    <!-- ./wrapper -->

    <!-- REQUIRED SCRIPTS -->
    <!-- jQuery -->
    <script src="/plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- overlayScrollbars -->
    <script src="/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
    <!-- AdminLTE App -->
    <script src="/dist/js/adminlte.js"></script>

    <!-- PAGE PLUGINS -->
    <!-- jQuery Mapael -->
    <script src="/plugins/jquery-mousewheel/jquery.mousewheel.js"></script>
    <script src="/plugins/raphael/raphael.min.js"></script>
    <script src="/plugins/jquery-mapael/jquery.mapael.min.js"></script>
    <script src="/plugins/jquery-mapael/maps/usa_states.min.js"></script>
    <!-- ChartJS -->
    <script src="/plugins/chart.js/Chart.min.js"></script>

    <!-- AdminLTE for demo purposes -->
    <script src="/dist/js/demo.js"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="/dist/js/pages/dashboard2.js"></script>

    <!-- Script para generar los gráficos -->
    <script>
        // Obtener los datos del backend para cantidad de facturas
        fetch('/cantidadFacturasHistorico')
            .then(response => response.json())
            .then(data => {
                const labels = Object.keys(data);
                const values = Object.values(data);
    
                const cantidadFacturasData = {
                    labels: labels,
                    datasets: [{
                        label: "Cantidad de Facturas",
                        data: values,
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1
                    }]
                };
    
                const cantidadFacturasConfig = {
                    type: 'line',
                    data: cantidadFacturasData,
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                };
    
                var cantidadFacturasChart = new Chart(
                    document.getElementById('cantidadFacturasChart'),
                    cantidadFacturasConfig
                );
            });
    
        // Obtener los datos del backend para importe total de facturas
        fetch('/importeTotalFacturasHistorico')
            .then(response => response.json())
            .then(data => {
                const labels = Object.keys(data);
                const values = Object.values(data);
    
                const importeTotalData = {
                    labels: labels,
                    datasets: [{
                        label: "Importe Total de Facturas",
                        data: values,
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 1
                    }]
                };
    
                const importeTotalConfig = {
                    type: 'line',
                    data: importeTotalData,
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                };
    
                var importeTotalChart = new Chart(
                    document.getElementById('importeTotalChart'),
                    importeTotalConfig
                );
            });
    </script>
    <script>
        function logout() {
            // Eliminar el token JWT del localStorage
            localStorage.removeItem('token');
            // Redirigir al usuario a la página de login
            window.location.href = '/auth/login';
        }
    </script>
    </body>

    </html>
</th:block>